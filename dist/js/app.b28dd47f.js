(function(){"use strict";var e={4144:function(e,t,a){var n=a(9242),u=a(3396),r=a(7139);const s=(0,u._)("h1",null,"Umi Rate",-1),i={class:"info"};function l(e,t,a,n,l,c){const o=(0,u.up)("LangSelect"),d=(0,u.up)("RateData"),p=(0,u.up)("ExchangeForm"),m=(0,u.up)("UpdateButton");return(0,u.wg)(),(0,u.iD)(u.HY,null,[s,(0,u.Wm)(o,{lang:l.lang,"onUpdate:lang":t[0]||(t[0]=e=>l.lang=e),class:"lang-select"},null,8,["lang"]),(0,u.Wm)(d,{umiRate:l.umiRate,lang:l.lang,translate:l.translate},null,8,["umiRate","lang","translate"]),(0,u.Wm)(p,{umiValue:l.umiValue,"onUpdate:umiValue":t[1]||(t[1]=e=>l.umiValue=e),currencyValue:l.currencyValue,"onUpdate:currencyValue":t[2]||(t[2]=e=>l.currencyValue=e),currency:l.currency,"onUpdate:currency":t[3]||(t[3]=e=>l.currency=e),focusedInput:l.focusedInput,"onUpdate:focusedInput":t[4]||(t[4]=e=>l.focusedInput=e),class:"app_form"},null,8,["umiValue","currencyValue","currency","focusedInput"]),(0,u.Wm)(m,{lang:l.lang,translate:l.translate,onBtnClick:c.updateClickHandler,class:"app_update"},null,8,["lang","translate","onBtnClick"]),(0,u._)("p",i,(0,r.zw)(l.translate.dateOfLastUpdate[this.lang])+": "+(0,r.zw)(l.lastUpdate),1)],64)}var c=a(252);function o(e,t,a,n,r,s){const i=(0,u.up)("a-input-number"),l=(0,u.up)("a-select-option"),c=(0,u.up)("a-select");return(0,u.wg)(),(0,u.iD)("form",null,[(0,u.Wm)(i,{onFocus:t[0]||(t[0]=t=>e.$emit("update:focusedInput",t.target.id)),onChange:t[1]||(t[1]=t=>e.$emit("update:umiValue",t)),value:a.umiValue,min:0,"addon-after":"UMI",id:"umiInput"},null,8,["value"]),(0,u.Wm)(i,{onFocus:t[3]||(t[3]=t=>e.$emit("update:focusedInput",t.target.id)),onChange:t[4]||(t[4]=t=>e.$emit("update:currencyValue",t)),value:a.currencyValue,min:0,id:"currencyInput"},{addonAfter:(0,u.w5)((()=>[(0,u.Wm)(c,{value:a.currency,onChange:t[2]||(t[2]=t=>e.$emit("update:currency",t)),style:{width:"80px"}},{default:(0,u.w5)((()=>[(0,u.Wm)(l,{value:"USD"},{default:(0,u.w5)((()=>[(0,u.Uk)("USD")])),_:1}),(0,u.Wm)(l,{value:"RUB"},{default:(0,u.w5)((()=>[(0,u.Uk)("RUB")])),_:1}),(0,u.Wm)(l,{value:"UZS"},{default:(0,u.w5)((()=>[(0,u.Uk)("UZS")])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])}var d={props:{umiValue:Number,currencyValue:Number,currency:String,focusedInput:String}},p=a(89);const m=(0,p.Z)(d,[["render",o],["__scopeId","data-v-de89146a"]]);var h=m;const f={class:"header"},g={class:"data"};function U(e,t,a,n,s,i){const l=(0,u.up)("a-spin"),c=(0,u.up)("a-timeline-item"),o=(0,u.up)("a-timeline");return(0,u.wg)(),(0,u.iD)(u.HY,null,[(0,u._)("h3",f,(0,r.zw)(this.translate.rateDataHeader[this.lang]),1),(0,u._)("div",g,[i.dataLoaded?(0,u.kq)("",!0):((0,u.wg)(),(0,u.j4)(l,{key:0,tip:this.translate.loaderTip[this.lang],class:"spin"},null,8,["tip"])),i.dataLoaded?((0,u.wg)(),(0,u.j4)(o,{key:1},{default:(0,u.w5)((()=>[(0,u.Wm)(c,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,r.zw)(a.umiRate.USD)+" USD",1)])),_:1}),(0,u.Wm)(c,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,r.zw)(a.umiRate.RUB)+" RUB",1)])),_:1}),(0,u.Wm)(c,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,r.zw)(a.umiRate.UZS.toFixed(2))+" UZS",1)])),_:1})])),_:1})):(0,u.kq)("",!0)])],64)}var y={props:{umiRate:Object,lang:String,translate:Object},computed:{dataLoaded(){return!!(this.umiRate&&this.umiRate.USD&&this.umiRate.RUB&&this.umiRate.UZS)}}};const v=(0,p.Z)(y,[["render",U],["__scopeId","data-v-40eeb52c"]]);var w=v;function R(e,t,a,n,r,s){const i=(0,u.up)("a-select-option"),l=(0,u.up)("a-select");return(0,u.wg)(),(0,u.j4)(l,{value:a.lang,onChange:t[0]||(t[0]=t=>e.$emit("update:lang",t)),style:{width:"120px"}},{default:(0,u.w5)((()=>[(0,u.Wm)(i,{value:"en"},{default:(0,u.w5)((()=>[(0,u.Uk)("English")])),_:1}),(0,u.Wm)(i,{value:"ru"},{default:(0,u.w5)((()=>[(0,u.Uk)("Русский")])),_:1})])),_:1},8,["value"])}var S={props:{lang:String}};const _=(0,p.Z)(S,[["render",R]]);var D=_,b=JSON.parse('{"messageUmiDataSuccess":{"en":"UMI data was loaded successfully","ru":"Данные курса UMI успешно обновлены"},"messageUmiDataError":{"en":"Did not manage to load UMI data","ru":"Произошла ошибка при загрузке курса UMI"},"messageUzsDataSuccess":{"en":"UZS data was loaded successfully","ru":"Данные курса UZS успешно обновлены"},"messageUzsDataError":{"en":"Did not manage to load UZS data","ru":"Произошла ошибка при загрузке курса UZS"},"dateOfLastUpdate":{"en":"The rates were updated","ru":"Данные были загружены"},"rateDataHeader":{"en":"Right now 1 UMI equals","ru":"Прямо сейчас 1 UMI равен"},"loaderTip":{"en":"Loading...","ru":"Загрузка..."},"updateButtonText":{"en":"Update rates","ru":"Обновить курс"},"updateButtonHint":{"en":"The rates are updated automatically every minute, but you can still use this","ru":"Курс обновляется автоматически каждую минуту, но вы можете использовать кнопку"}}');const I={class:"cont"},k={class:"hint"};function V(e,t,a,n,s,i){const l=(0,u.up)("a-button");return(0,u.wg)(),(0,u.iD)("div",I,[(0,u.Wm)(l,{onClick:t[0]||(t[0]=t=>e.$emit("btnClick")),shape:"round",type:"primary"},{default:(0,u.w5)((()=>[(0,u.Uk)((0,r.zw)(this.translate.updateButtonText[this.lang]),1)])),_:1}),(0,u._)("div",k,(0,r.zw)(this.translate.updateButtonHint[this.lang]),1)])}var Z={props:{lang:String,translate:Object}};const O=(0,p.Z)(Z,[["render",V],["__scopeId","data-v-61442d6e"]]);var z=O,x={name:"App",data(){return{lang:"en",translate:b,umiValue:0,currencyValue:0,currency:"USD",focusedInput:null,umiRate:{USD:null,RUB:null,UZS:null},lastUpdate:"Loading..."}},methods:{async fetchUmiRate(){return await fetch("https://stats.umi.top/rates").then((e=>e.json())).then((e=>e.data))},async fetchUzsRate(){return await fetch("/get_uzs_rate").then((e=>e.json())).then((e=>e.filter((e=>"USD"==e.code)))).then((e=>e[0].cb_price))},async setUmiRate(e=!1){let t=await this.fetchUmiRate().catch((t=>{console.log(t),e||c.ZP.error(b.messageUmiDataError[this.lang])}));t&&(e||c.ZP.success(b.messageUmiDataSuccess[this.lang]),this.umiRate.USD=+t.USD.value,this.umiRate.RUB=+t.RUB.value)},async setUzsRate(e=!1){let t=await this.fetchUzsRate().catch((t=>{console.log(t),e||c.ZP.error(b.messageUzsDataError[this.lang])}));t&&(e||c.ZP.success(b.messageUzsDataSuccess[this.lang]),this.umiRate.UZS=this.umiRate.USD*t)},async setRates(){this.umiRate={USD:null,RUB:null,UZS:null},await this.setUmiRate(!1),await this.setUzsRate(!1),this.lastUpdate=(new Date).toLocaleString()},async setRatesSilent(){await this.setUmiRate(!0),await this.setUzsRate(!0),this.lastUpdate=(new Date).toLocaleString()},updateClickHandler(){this.setRates()}},components:{ExchangeForm:h,RateData:w,LangSelect:D,UpdateButton:z},async mounted(){this.setRates(),setInterval((()=>{this.setRatesSilent()}),58e3)},watch:{umiValue(e){"currencyInput"!=this.focusedInput&&(this.currencyValue=+(e*this.umiRate[this.currency]).toFixed(2))},currencyValue(e){"umiInput"!=this.focusedInput&&(this.umiValue=+(e/this.umiRate[this.currency]).toFixed(2))},currency(e){this.currencyValue=+(this.umiValue*this.umiRate[e]).toFixed(2)}}};const B=(0,p.Z)(x,[["render",l]]);var j=B,W=a(7120);a(2467);(0,n.ri)(j).use(W.ZP).mount("#app")}},t={};function a(n){var u=t[n];if(void 0!==u)return u.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,u,r){if(!n){var s=1/0;for(o=0;o<e.length;o++){n=e[o][0],u=e[o][1],r=e[o][2];for(var i=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(o--,1);var c=u();void 0!==c&&(t=c)}}return t}r=r||0;for(var o=e.length;o>0&&e[o-1][2]>r;o--)e[o]=e[o-1];e[o]=[n,u,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var u,r,s=n[0],i=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(u in i)a.o(i,u)&&(a.m[u]=i[u]);if(l)var o=l(a)}for(t&&t(n);c<s.length;c++)r=s[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(o)},n=self["webpackChunkexchange"]=self["webpackChunkexchange"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4144)}));n=a.O(n)})();
//# sourceMappingURL=app.b28dd47f.js.map